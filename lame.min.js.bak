!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).lamejs=e()}}(function(){return function e(t,r,o){function i(n,f){if(!r[n]){if(!t[n]){var s="function"==typeof require&&require;if(!f&&s)return s(n,!0);if(a)return a(n,!0);var u=new Error("Cannot find module '"+n+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[n]={exports:{}};t[n][0].call(l.exports,function(e){var r=t[n][1][e];return i(r?r:e)},l,l.exports,e,t,r,o)}return r[n].exports}for(var a="function"==typeof require&&require,n=0;n<o.length;n++)i(o[n]);return i}({1:[function(e,t,r){(function(e){"use strict";var o=e.lamejs;o.WavHeader=e("./wav"),o.Mp3Encoder=e("./encoder"),t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./encoder":2,"./wav":3}],2:[function(e,t,r){"use strict";var o=e("../lib/bitstream"),i=e("../lib/lame"),a=e("../lib/id3"),n=function(e,t,r){this.channels=e,this.sampleRate=t,this.bitRate=r,this.lame=new i,this.lame.set_num_channels(e),this.lame.set_in_samplerate(t),this.lame.set_bitrate(r),this.lame.init_params(),this.lame.set_write_id3tag_automatic(0)};n.prototype.encodeBuffer=function(){for(var e=this.lame,t=e.get_num_channels(),r=Array.prototype.slice.call(arguments,0,t),i=r[0].length,a=new o(i/10+256),n=0;n<i;n+=1152){for(var s=[],u=0;u<t;u++){r[u].subarray(n,n+1152)}var l=e.encode_buffer(r[0],r[1],r[0].length,a);l>0&&a.copy(a.buffer,a.offset-l,a.offset)}var c=e.encode_flush(a);c>0&&a.copy(a.buffer,a.offset-c,a.offset);var p=new(e("../lib/id3"))(e);p.v1_write_tag(a);var f=a.buffer.slice(0,a.offset);return new Int8Array(f)},n.prototype.flush=function(){var e=this.lame,t=new o(7200),r=e.encode_flush(t);r>0&&t.copy(t.buffer,t.offset-r,t.offset);var i=new a(e);i.v1_write_tag(t);var n=t.buffer.slice(0,t.offset);return new Int8Array(n)},t.exports=n},{"../lib/bitstream":4,"../lib/id3":5,"../lib/lame":6}],3:[function(e,t,r){"use strict";function o(e,t){for(var r=0;r<t.length;r++)e.set(t[r],r*e.length)}var i=function(e){this.dataLength=e.dataLength||0,this.numChannels=e.numChannels||2,this.sampleRate=e.sampleRate||44100,this.bitDepth=e.bitDepth||16,this.header=this.getHeader()};i.prototype.getHeader=function(){var e=new ArrayBuffer(44),t=new DataView(e);return t.setUint8(0,82),t.setUint8(1,73),t.setUint8(2,70),t.setUint8(3,70),t.setUint32(4,36+this.dataLength,!0),t.setUint8(8,87),t.setUint8(9,65),t.setUint8(10,86),t.setUint8(11,69),t.setUint8(12,102),t.setUint8(13,109),t.setUint8(14,116),t.setUint8(15,32),t.setUint32(16,16,!0),t.setUint16(20,1,!0),t.setUint16(22,this.numChannels,!0),t.setUint32(24,this.sampleRate,!0),t.setUint32(28,this.sampleRate*this.numChannels*(this.bitDepth/8),!0),t.setUint16(32,this.numChannels*(this.bitDepth/8),!0),t.setUint16(34,this.bitDepth,!0),t.setUint8(36,100),t.setUint8(37,97),t.setUint8(38,116),t.setUint8(39,97),t.setUint32(40,this.dataLength,!0),e},i.RIFF=function(e,t){var r=new DataView(e);r.setUint8(0,82),r.setUint8(1,73),r.setUint8(2,70),r.setUint8(3,70),r.setUint32(4,t,!0)},i.WAVE=function(e){var t=new DataView(e);t.setUint8(0,87),t.setUint8(1,65),t.setUint8(2,86),t.setUint8(3,69)},i.fmt=function(e,t,r,o,i,a,n){var s=new DataView(e);s.setUint8(0,102),s.setUint8(1,109),s.setUint8(2,116),s.setUint8(3,32),s.setUint32(4,16,!0),s.setUint16(8,t,!0),s.setUint16(10,r,!0),s.setUint32(12,o,!0),s.setUint32(16,i,!0),s.setUint16(20,a,!0),s.setUint16(22,n,!0)},i.data=function(e,t){var r=new DataView(e);r.setUint8(0,100),r.setUint8(1,97),r.setUint8(2,116),r.setUint8(3,97),r.setUint32(4,t,!0)},i.interleave=function(e,t){var r=new Float32Array(e.length+t.length);return o(r,arguments),r},i.deinterleave=function(e){for(var t=e.length/2,r=new Float32Array(t),o=new Float32Array(t),i=0,a=0;i<t;i++)r[i]=e[a++],o[i]=e[a++];return[r,o]},t.exports=i},{}],4:[function(e,t,r){"use strict";var o=function(e){this.buffer=new ArrayBuffer(e),this.offset=0,this.data=new DataView(this.buffer),this.masks=[0,1,3,7,15,31,63,127,255]};o.prototype.copy=function(e,t,r){for(var o=t;o<r;o++)this.data.setUint8(this.offset++,e[o])},o.prototype.push=function(e,t){var r=this.offset,o=r>>3,i=7&r,a=8-i,n=this.data.getUint8(o);n&=this.masks[i]<<a,n|=e>>>i,this.data.setUint8(o,n),o++,t>a&&(n=255&e<<a,this.data.setUint8(o,n)),this.offset+=t},t.exports=o},{}],5:[function(e,t,r){"use strict";var o=function(e){this.lame=e};o.prototype.v1_write_tag=function(e){this.v1_write_tag_raw(e)},o.prototype.v1_write_tag_raw=function(e){var t=this.lame,r=t.get_id3_tag_v1_tag();e.copy(r,0,r.length)},o.prototype.v2_write_tag=function(e){this.v2_write_tag_raw(e)},o.prototype.v2_write_tag_raw=function(e){var t=this.lame,r=t.get_id3_tag_v2_tag();e.copy(r,0,r.length)},o.prototype.v1_tag=function(e){var t=this.lame,r=t.get_id3_tag_v1_tag();e.copy(r,0,r.length)},o.prototype.v2_tag=function(e){var t=this.lame,r=t.get_id3_tag_v2_tag();e.copy(r,0,r.length)},o.prototype.get_id3_tag=function(e){var t=this.lame,r=t.get_id3_tag_v2_tag();e.copy(r,0,r.length)},t.exports=o},{}],6:[function(e,t,r){"use strict";var o=e("./util"),i=e("./tables"),a=e("./bitstream"),n=e("./id3"),s=function(){this.lame_init_old()};s.prototype={lame_init_old:function(){this.lame_init_params_old(),this.lame_init_bitstream_old()},lame_init_params_old:function(){this.class_id=0,this.side_info=null,this.frame_header=null,this.frame_data=null,this.frame_data_index=0,this.frame_header_size=0,this.frame_data_size=0,this.frame_data_size_in_bits=0,this.frame_data_size_in_bytes=0,this.frame_data_size_in_samples=0,this.frame_data_size_in_samples_per_channel=0,this.frame_data_size_in_samples_per_channel_per_granule=0,this.frame_data_size_in_samples_per_channel_per_granule_per_sub_granule=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.brate=0,this.mode=i.MPEG_mode.NOT_SET,this.mode_ext=0,this.nsPsy=new i.PsyConst,this.in_buffer=null,this.in_buffer_p=0,this.in_buffer_conversion_p=0,this.in_buffer_flushed=0,this.in_buffer_size=0,this.in_buffer_size_conversion=0,this.in_buffer_size_flushed=0,this.in_buffer_size_used=0,this.in_buffer_size_used_conversion=0,this.in_buffer_size_used_flushed=0,this.in_buffer_size_used_total=0,this.in_buffer_size_used_total_conversion=0,this.in_buffer_size_used_total_flushed=0,this.in_buffer_size_used_total_flushed_conversion=0,this.in_buffer_size_used_total_flushed_conversion_p=0,this.in_buffer_size_used_total_flushed_p=0,this.in_buffer_size_used_total_p=0,this.in_buffer_size_used_total_conversion_p=0,this.in_buffer_size_used_total_flushed_conversion_p=0,this.in_buffer_size_used_total_flushed_p=0,this.in_buffer_size_used_total_p=0,this.in_buffer_size_used_total_conversion_p=0,this.in_buffer_size_used_total_flushed_conversion_p=0,this.in_buffer_size_used_total_flushed_p=0,this.in_buffer_size_used_total_p=0,this.in_buffer_size_used_total_conversion_p=0,this.in_buffer_size_used_total_flushed_conversion_p=0,this.in_buffer_size_used_total_flushed_p=0,this.in_buffer_size_used_total_p=0,this.in_buffer_size_used_total_conversion_p=0,this.in_buffer_size_used_total_flushed_conversion_p=0,this.in_buffer_size_used_total_flushed_p=0,this.in_buffer_size_used_total_p=0,this.in_buffer_size_used_total_conversion_p=0,this.in_buffer_size_used_total_flushed_conversion_p=0,this.in_buffer_size_used_total_flushed_p=0,this.in_buffer_size_used_total_p=0,this.in_buffer_size_used_total_conversion_p=0,this.in_buffer_size_used_total_flushed_conversion_p=0,this.in_buffer_size_used_total_flushed_p=0,this.in_buffer_size_used_total_p=0,this.in_buffer_size_used_total_conversion_p=0,this.in_buffer_size_used_total_flushed_conversion_p=0,this.in_buffer_size_used_total_flushed_p=0,this.in_buffer_size_used_total_p=0,this.in_buffer_size_used_total_conversion_p=0,this.in_buffer_size_used_total_flushed_conversion_p=0,this.in_buffer_size_used_total_flushed_p=0,this.in_buffer_size_used_total_p=0,this.in_buffer_size_used_total_conversion_p=0,this.in_buffer_size_used_total_flushed_conversion_p=0,this.in_buffer_size_used_total_flushed_p=0,this.in_buffer_size_used_total_p=0,this.in_buffer_size_used_total_conversion_p=0,this.in_buffer_size_used_total_flushed_conversion_p=0,this.in_buffer_size_used_total_flushed_p=0,this.in_buffer_size_used_total_p=0,this.in_buffer_size_used_total_conversion_p=0,this.in_buffer_size_used_total_flushed_conversion_p=0,this.in_buffer_size_used_total_flushed_p=0,this.in_buffer_size_used_total_p=0,this.in_buffer_size_used_total_conversion_p=0,this.in_buffer_size_used_total_flushed_conversion_p=0,this.in_buffer_size_used_total_flushed_p=0,this.in_buffer_size_used_total_p=0,this.in_buffer_size_used_total_conversion_p=0,this.in_buffer_size_used_total_flushed_conversion_p=0,this.in_buffer_size_used_total_flushed_p=0,this.in_buffer_size_used_total_p=0,this.in_buffer_size_used_total_conversion_p=0,this.in_buffer_size_used_total_flushed_conversion_p=0,this.in_buffer_size_used_total_flushed_p=0,this.in_buffer_size_used_total_p=0,this.in_buffer_size_used_total_conversion_p=0,this.in_buffer_size_used_total_flushed_conversion_p=0,this.in_buffer_size_used_total_flushed_p=0,this.in_buffer_size_used_total_p=0,this.in_buffer_size_used_total_conversion_p=0,this.in_buffer_size_used_total_flushed_conversion_p=0,this.in_buffer_size_used_total_flushed_p=0,this.in_buffer_size_used_total_p=0,this.in_buffer_size_used_total_conversion_p=0,this.in_buffer_size_used_total_flushed_conversion_p=0,this.in_buffer_size_used_total_flushed_p=0,this.in_buffer_size_used_total_p=0,this.in_buffer_size_used_total_conversion_p=0,this.in_buffer_size_used_total_flushed_conversion_p=0,this.in_buffer_size_used_total_flushed_p=0,this.in_buffer_size_used_total_p=0,this.in_buffer_size_used_total_conversion_p=0},lame_init_bitstream_old:function(){},lame_encode_buffer_old:function(e,t,r,i){var a=this.num_channels;o.isInt(r)||(r=r.length);for(var n=0,s=0;s<r;s++)this.in_buffer[a-1][this.in_buffer_p+s]=e[s],2==a&&(this.in_buffer[1][this.in_buffer_p+s]=t[s]);if(this.in_buffer_p+=r,r=this.in_buffer_p,r<1152)return 0;var u=r/1152;n=this.lame_encode_frame_old(this.in_buffer,i,u),this.in_buffer_p=r%1152,0==this.in_buffer_p||o.arraycopy(this.in_buffer,s*1152,this.in_buffer,0,this.in_buffer_p);return n},lame_encode_frame_old:function(e,t,r){for(var o=0,i=0,a=0;a<r;a++)o+=this.lame_encode_mp3_frame_old(e,t,i);return o},lame_encode_mp3_frame_old:function(e,t,r){var o=0,n=this.bs.get_audio_header(this),s=this.bs.get_audio_data(n);return o.arraycopy(s,0,t,o,n),o+=n,o},lame_encode_flush_old:function(e){var t=0,r=0;if(this.in_buffer_p>0){var i=new Float32Array(this.in_buffer_p),a=new Float32Array(this.in_buffer_p);o.arraycopy(this.in_buffer[0],0,i,0,this.in_buffer_p),o.arraycopy(this.in_buffer[1],0,a,0,this.in_buffer_p),t=this.lame_encode_buffer_old(i,a,this.in_buffer_p,e),r+=t}var s=new n(this);return s.v1_tag(e),r},set_num_channels:function(e){this.num_channels=e},get_num_channels:function(){return this.num_channels},set_in_samplerate:function(e){this.in_samplerate=e},get_in_samplerate:function(){return this.in_samplerate},set_out_samplerate:function(e){this.out_samplerate=e},get_out_samplerate:function(){return this.out_samplerate},set_bitrate:function(e){this.brate=e},get_bitrate:function(){return this.brate},set_mode:function(e){this.mode=e},get_mode:function(){return this.mode},set_mode_ext:function(e){this.mode_ext=e},get_mode_ext:function(){return this.mode_ext},set_write_id3tag_automatic:function(e){this.id3_automatic=e},get_framesize:function(){var e=this.in_samplerate;return 1==this.version?e>=32e3?1152:576:e<16e3?576:1152},get_id3_tag_v1_tag:function(){return new Int8Array},get_id3_tag_v2_tag:function(){return new Int8Array},lame_init_params:function(){this.version=1,this.num_channels<=0&&(this.num_channels=2),this.in_samplerate<=0&&(this.in_samplerate=44100),this.brate<=0&&(this.brate=128),this.out_samplerate=0,this.mode=this.num_channels>1?i.MPEG_mode.STEREO:i.MPEG_mode.MONO;var e=this.in_samplerate;switch(e){case 16e3:case 22050:case 24e3:e/=2;break;case 32e3:case 44100:case 48e3:break;default:return-1}this.out_samplerate=e,this.version=e<32e3?0:1,this.bs=new a(1152*this.brate/this.in_samplerate+4),this.side_info=new i.SideInfo(this.num_channels,this.version);var t=this.get_framesize();this.in_buffer=[new Float32Array(t),new Float32Array(t)]},encode_buffer:function(e,t,r,i){var a=this.num_channels;o.isInt(r)||(r=r.length);for(var n=0,s=0;s<r;s++)this.in_buffer[a-1][this.in_buffer_p+s]=e[s],2==a&&(this.in_buffer[1][this.in_buffer_p+s]=t[s]);var u=this.in_buffer_p+r;if(u<1152)return this.in_buffer_p=u,0;var l=parseInt(u/1152);n=this.lame_encode_frame(this.in_buffer,i,l),this.in_buffer_p=u%1152,0!=this.in_buffer_p&&o.arraycopy(this.in_buffer,1152*l,this.in_buffer,0,this.in_buffer_p);return n},encode_flush:function(e){var t=0,r=0;if(this.in_buffer_p>0){var i=new Float32Array(this.in_buffer_p),a=new Float32Array(this.in_buffer_p);o.arraycopy(this.in_buffer[0],0,i,0,this.in_buffer_p),o.arraycopy(this.in_buffer[1],0,a,0,this.in_buffer_p),t=this.encode_buffer(i,a,this.in_buffer_p,e),r+=t}var s=new n(this);return this.id3_automatic&&s.v1_tag(e),r},lame_encode_frame:function(e,t,r){for(var o=0,i=0;i<r;i++)o+=this.lame_encode_mp3_frame(e,i,t);return o},lame_encode_mp3_frame:function(e,t,r){var o=0,i=this.bs.get_audio_header(this,e,t),a=this.bs.get_audio_data(i);return o.arraycopy(a,0,r,0,i),o+=i,o}},t.exports=s},{"./bitstream":4,"./id3":5,"./tables":7,"./util":8}],7:[function(e,t,r){"use strict";r.MPEG_mode={STEREO:0,JOINT_STEREO:1,DUAL_CHANNEL:2,MONO:3,NOT_SET:4,MAX_INDICATOR:5},r.PsyConst=function(){},r.GrInfo=function(){this.part2_3_length=0,this.big_values=0,this.global_gain=0,this.scalefac_compress=0,this.window_switching_flag=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=new Int32Array(3),this.subblock_gain=new Int32Array(3),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0},r.SideInfo=function(e,t){this.main_data_begin=0,this.private_bits=0,this.resvDrain=0,this.scfsi=new Int32Array([0,0]),this.gr=new Int32Array(2);for(var o=0;o<2;o++)this.gr[o]=new r.GrInfo}},{}],8:[function(e,t,r){"use strict";var o=function(e){return"number"==typeof e&&e%1==0};r.isInt=o;var i=function(e,t,r,o,i){for(var a=0;a<i;a++)r[o+a]=e[t+a]};r.arraycopy=i;var a=function(e,t){var r=e.length;o(t)||(t=128);for(var i=new Int8Array(r),a=0;a<r;a++)i[a]=e[a];return i};r.new_byte_array=a},{}]},{},[1])(1)});